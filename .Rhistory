WorkingDiseases <- c("Campylobacteriosis","Salmonellosis","Shigellosis",'Toxoplasma','Listeriosis','SalmonellaTyphi')
### CURRENTLY THE ESTIMATES COSTS FUNCTION PULLS ON INCIDENCE LIST AS A GLOBAL
### VARIABLE WITH NO REGARD FOR WHICH YEAR INCIDENCE LIST WAS CALCULATED FOR.
### I.E. YOU CAN CALCULATE INCIDENCE FOR YEAR 2019 THEN CALCULATE COSTS FOR YEAR
### 2020 WITHOUT GETTING AN ERROR. FIX BY MAKING INCIDENCE A LIST OF LISTS
### WITH AND ENTRY FOR EACH YEAR?
IncidenceList <- makeIncidenceList(2019,
diseases = DiseaseAssumptions[WorkingDiseases],
ndraws = ndraws)
source("./Data/Diseases.R")
### CURRENTLY THE ESTIMATES COSTS FUNCTION PULLS ON INCIDENCE LIST AS A GLOBAL
### VARIABLE WITH NO REGARD FOR WHICH YEAR INCIDENCE LIST WAS CALCULATED FOR.
### I.E. YOU CAN CALCULATE INCIDENCE FOR YEAR 2019 THEN CALCULATE COSTS FOR YEAR
### 2020 WITHOUT GETTING AN ERROR. FIX BY MAKING INCIDENCE A LIST OF LISTS
### WITH AND ENTRY FOR EACH YEAR?
IncidenceList <- makeIncidenceList(2019,
diseases = DiseaseAssumptions[WorkingDiseases],
ndraws = ndraws)
IncidenceList$Initial$SalmonellaTyphi$`5-64`
SequelaeFractions <- calcSequelaeFractions(IncidenceList$Sequel)
SequelaeFractions
HospList <- makeHospList(2019,
IncidenceList,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
DeathList <- makeDeathList(2019,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
DeathList$SalmonellaTyphi
DeathList$SalmonellaTyphi$`5-64`
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
IncidenceList$Initial$Listeriosis$`5-64`
IncidenceList$Initial$Listeriosis$`65+`
IncidenceList$Initial$Listeriosis$`5-64`
IncidenceList$Initial$Listeriosis$`<5`
source("./Data/Diseases.R")
source("./R/loadData.R")
source("./R/estimationFunctions.R")
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
source("./R/estimationFunctions.R")
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
IncidenceList$Initial$SalmonellaTyphi
source("./R/estimationFunctions.R")
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
source("./R/estimationFunctions.R")
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
source("./Data/Diseases.R")
WorkingDiseases <- c("Campylobacteriosis","Salmonellosis","Shigellosis",'Toxoplasma','Listeriosis',"Typhoid Fever")
### CURRENTLY THE ESTIMATES COSTS FUNCTION PULLS ON INCIDENCE LIST AS A GLOBAL
### VARIABLE WITH NO REGARD FOR WHICH YEAR INCIDENCE LIST WAS CALCULATED FOR.
### I.E. YOU CAN CALCULATE INCIDENCE FOR YEAR 2019 THEN CALCULATE COSTS FOR YEAR
### 2020 WITHOUT GETTING AN ERROR. FIX BY MAKING INCIDENCE A LIST OF LISTS
### WITH AND ENTRY FOR EACH YEAR?
IncidenceList <- makeIncidenceList(2019,
diseases = DiseaseAssumptions[WorkingDiseases],
ndraws = ndraws)
SequelaeFractions <- calcSequelaeFractions(IncidenceList$Sequel)
HospList <- makeHospList(2019,
IncidenceList,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
DeathList <- makeDeathList(2019,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
source("./Data/Diseases.R")
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
source("./R/ClassDefinitions.R")
source("./Data/Diseases.R")
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
#Summarise draws with median, and 90 CIs
# Can probably reuse some code here...
IncidenceTable <- IncidenceList %>% as.data.frame(check.names = F) %>%
mutate(Draw = row.names(.)) %>%
pivot_longer(-Draw, names_sep = "\\.",
names_to = c("Kind","Pathogen", "AgeGroup", "Disease")) %>%
mutate(Disease = if_else(is.na(Disease), Pathogen, Disease)) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, Disease) %>%
summarise(value = sum(value)) %>%
mutate(AgeGroup = 'All Ages')) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, AgeGroup) %>%
summarise(value = sum(value)) %>%
mutate(Disease = 'All Diseases')) %>%
bind_rows(.,
group_by(.,Draw, AgeGroup, Disease) %>%
summarise(value = sum(value)) %>%
mutate(Pathogen = 'All Pathogens')) %>%
group_by(Kind,Pathogen, AgeGroup, Disease) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
HospTable <- HospList %>%
data.frame(check.names = F) %>%
mutate(Draw = row.names(.)) %>%
pivot_longer(-Draw, names_sep = "\\.",
names_to = c("Kind","Pathogen", "AgeGroup", "Disease")) %>%
subset(!is.na(value)) %>%
mutate(Disease = if_else(is.na(Disease), Pathogen, Disease)) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, Disease) %>%
summarise(value = sum(value)) %>%
mutate(AgeGroup = 'All Ages')) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, AgeGroup) %>%
summarise(value = sum(value)) %>%
mutate(Disease = 'All Diseases')) %>%
bind_rows(.,
group_by(.,Draw, AgeGroup, Disease) %>%
summarise(value = sum(value)) %>%
mutate(Pathogen = 'All Pathogens')) %>%
group_by(Pathogen, AgeGroup, Disease) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
DeathTable <- DeathList %>%
as.data.frame(check.names = F) %>%
mutate(Draw = row.names(.)) %>%
pivot_longer(-Draw, names_sep = "\\.",
names_to = c("Disease", "AgeGroup", "Pathogen")) %>%
subset(!is.na(value)) %>%
mutate(Pathogen = if_else(is.na(Pathogen), Disease, Pathogen)) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, Disease) %>%
summarise(value = sum(value)) %>%
mutate(AgeGroup = 'All Ages')) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, AgeGroup) %>%
summarise(value = sum(value)) %>%
mutate(Disease = 'All Diseases')) %>%
bind_rows(.,
group_by(.,Draw, AgeGroup, Disease) %>%
summarise(value = sum(value)) %>%
mutate(Pathogen = 'All Pathogens')) %>%
group_by(Pathogen, AgeGroup, Disease) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
EpiTable <- bind_rows(Deaths = DeathTable, Hospitalisations = HospTable, Cases = IncidenceTable,.id = 'Measure') %>%
subset(!(Disease %in% names(DiseaseAssumptions) & Pathogen == 'All Pathogens'))
write.csv(EpiTable,'./R/EpiTable.csv')
CostListTotals <- CostList %>%
as.data.frame(check.names = F) %>%
mutate(Draw = row.names(.)) %>%
pivot_longer(-Draw, names_sep = "\\.",
names_to = c("Pathogen", "AgeGroup", "Disease","CostItem")) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, Disease,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(AgeGroup = 'All Ages')) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, AgeGroup,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(Disease = 'All Diseases')) %>%
bind_rows(.,
group_by(.,Draw, Disease, AgeGroup,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(Pathogen = 'All Pathogens'))
CostTable <-  CostListTotals %>%
group_by(Pathogen, AgeGroup, Disease, CostItem) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
HospList$Initial$Listeriosis
CostList$Listeriosis$`5-64`$Listeriosis$HumanCapital
CostList$Listeriosis$`65+`$Listeriosis$HumanCapital
CostList$Listeriosis$`<5`$Listeriosis$HumanCapital
WorkingDiseases <- c("Campylobacteriosis","Salmonellosis","Shigellosis",'Toxoplasma',
#'Listeriosis',
"Typhoid Fever")
### CURRENTLY THE ESTIMATES COSTS FUNCTION PULLS ON INCIDENCE LIST AS A GLOBAL
### VARIABLE WITH NO REGARD FOR WHICH YEAR INCIDENCE LIST WAS CALCULATED FOR.
### I.E. YOU CAN CALCULATE INCIDENCE FOR YEAR 2019 THEN CALCULATE COSTS FOR YEAR
### 2020 WITHOUT GETTING AN ERROR. FIX BY MAKING INCIDENCE A LIST OF LISTS
### WITH AND ENTRY FOR EACH YEAR?
IncidenceList <- makeIncidenceList(2019,
diseases = DiseaseAssumptions[WorkingDiseases],
ndraws = ndraws)
SequelaeFractions <- calcSequelaeFractions(IncidenceList$Sequel)
HospList <- makeHospList(2019,
IncidenceList,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
DeathList <- makeDeathList(2019,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
warning('When summing across agegroups the draws of the multiplies used for each agegroup are considered independent. Making them dependent would require reworking the whole program, and is not necessarily a better assumption, but it is something to be aware of')
#Summarise draws with median, and 90 CIs
# Can probably reuse some code here...
IncidenceTable <- IncidenceList %>% as.data.frame(check.names = F) %>%
mutate(Draw = row.names(.)) %>%
pivot_longer(-Draw, names_sep = "\\.",
names_to = c("Kind","Pathogen", "AgeGroup", "Disease")) %>%
mutate(Disease = if_else(is.na(Disease), Pathogen, Disease)) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, Disease) %>%
summarise(value = sum(value)) %>%
mutate(AgeGroup = 'All Ages')) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, AgeGroup) %>%
summarise(value = sum(value)) %>%
mutate(Disease = 'All Diseases')) %>%
bind_rows(.,
group_by(.,Draw, AgeGroup, Disease) %>%
summarise(value = sum(value)) %>%
mutate(Pathogen = 'All Pathogens')) %>%
group_by(Kind,Pathogen, AgeGroup, Disease) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
HospTable <- HospList %>%
data.frame(check.names = F) %>%
mutate(Draw = row.names(.)) %>%
pivot_longer(-Draw, names_sep = "\\.",
names_to = c("Kind","Pathogen", "AgeGroup", "Disease")) %>%
subset(!is.na(value)) %>%
mutate(Disease = if_else(is.na(Disease), Pathogen, Disease)) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, Disease) %>%
summarise(value = sum(value)) %>%
mutate(AgeGroup = 'All Ages')) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, AgeGroup) %>%
summarise(value = sum(value)) %>%
mutate(Disease = 'All Diseases')) %>%
bind_rows(.,
group_by(.,Draw, AgeGroup, Disease) %>%
summarise(value = sum(value)) %>%
mutate(Pathogen = 'All Pathogens')) %>%
group_by(Pathogen, AgeGroup, Disease) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
DeathTable <- DeathList %>%
as.data.frame(check.names = F) %>%
mutate(Draw = row.names(.)) %>%
pivot_longer(-Draw, names_sep = "\\.",
names_to = c("Disease", "AgeGroup", "Pathogen")) %>%
subset(!is.na(value)) %>%
mutate(Pathogen = if_else(is.na(Pathogen), Disease, Pathogen)) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, Disease) %>%
summarise(value = sum(value)) %>%
mutate(AgeGroup = 'All Ages')) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, AgeGroup) %>%
summarise(value = sum(value)) %>%
mutate(Disease = 'All Diseases')) %>%
bind_rows(.,
group_by(.,Draw, AgeGroup, Disease) %>%
summarise(value = sum(value)) %>%
mutate(Pathogen = 'All Pathogens')) %>%
group_by(Pathogen, AgeGroup, Disease) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
EpiTable <- bind_rows(Deaths = DeathTable, Hospitalisations = HospTable, Cases = IncidenceTable,.id = 'Measure') %>%
subset(!(Disease %in% names(DiseaseAssumptions) & Pathogen == 'All Pathogens'))
write.csv(EpiTable,'./R/EpiTable.csv')
CostListTotals <- CostList %>%
as.data.frame(check.names = F) %>%
mutate(Draw = row.names(.)) %>%
pivot_longer(-Draw, names_sep = "\\.",
names_to = c("Pathogen", "AgeGroup", "Disease","CostItem")) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, Disease,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(AgeGroup = 'All Ages')) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, AgeGroup,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(Disease = 'All Diseases')) %>%
bind_rows(.,
group_by(.,Draw, Disease, AgeGroup,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(Pathogen = 'All Pathogens'))
CostTable <-  CostListTotals %>%
group_by(Pathogen, AgeGroup, Disease, CostItem) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
CostList$`Typhoid Fever`$`5-64`$`Typhoid Fever`$HumanCapital
CostList$`Typhoid Fever`$`<5`$`Typhoid Fever`$HumanCapital
View(CostList$`Typhoid Fever`)
Hospitalisations$DC4D
Costs
source("./R/loadData.R")
Costs <- getCosts()
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
CostListTotals <- CostList %>%
as.data.frame(check.names = F) %>%
mutate(Draw = row.names(.)) %>%
pivot_longer(-Draw, names_sep = "\\.",
names_to = c("Pathogen", "AgeGroup", "Disease","CostItem")) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, Disease,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(AgeGroup = 'All Ages')) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, AgeGroup,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(Disease = 'All Diseases')) %>%
bind_rows(.,
group_by(.,Draw, Disease, AgeGroup,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(Pathogen = 'All Pathogens'))
CostTable <-  CostListTotals %>%
group_by(Pathogen, AgeGroup, Disease, CostItem) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
CostListTotals
CostListTotals %>% subset(CostItem == 'WTPOngoing')
CostListTotals %>% subset(CostItem == 'Hospitalisation')
CostListTotals %>% subset(CostItem == 'Hospitalisation' & Pathogen == "Typhoid Fever")
CostListTotals %>% subset(Pathogen == "Typhoid Fever")
costWTP
source("./R/Distributions.R")
source("./R/ClassDefinitions.R")
source("./Data/Diseases.R")
source("./R/loadData.R")
source("./R/estimationFunctions.R")
#Load all the data and assumptions
NNDSSIncidenceAgegroup <- getCasesAgeGroup()
AusPopAgegroup <- getAusPopAgeGroup()
AusPopSingleYear <- getAusPopSingleYearAge()
Costs <- getCosts()
WTPValues <- getWTP()
VSL <- getValueStatisticalLife()
Deaths <- getABSDeaths()
MissedDaysGastro <- getMissedDaysGastro()
FrictionRates <- getFrictionRates()
Workforce <- getWorkforceAssumptions() ##What year is this for and does it need to change by year?
# Draw from all distributions
ndraws <- 10^3
WorkingDiseases <- c("Campylobacteriosis","Salmonellosis","Shigellosis",'Toxoplasma',
#'Listeriosis',
"Typhoid Fever")
### CURRENTLY THE ESTIMATES COSTS FUNCTION PULLS ON INCIDENCE LIST AS A GLOBAL
### VARIABLE WITH NO REGARD FOR WHICH YEAR INCIDENCE LIST WAS CALCULATED FOR.
### I.E. YOU CAN CALCULATE INCIDENCE FOR YEAR 2019 THEN CALCULATE COSTS FOR YEAR
### 2020 WITHOUT GETTING AN ERROR. FIX BY MAKING INCIDENCE A LIST OF LISTS
### WITH AND ENTRY FOR EACH YEAR?
IncidenceList <- makeIncidenceList(2019,
diseases = DiseaseAssumptions[WorkingDiseases],
ndraws = ndraws)
SequelaeFractions <- calcSequelaeFractions(IncidenceList$Sequel)
HospList <- makeHospList(2019,
IncidenceList,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
DeathList <- makeDeathList(2019,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
source("./R/estimationFunctions.R")
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
print(NULL)
WorkingDiseases <- c(
"Campylobacteriosis",
#"Salmonellosis",
#"Shigellosis",
#'Toxoplasma',
#'Listeriosis',
#"Typhoid Fever"
)
WorkingDiseases <- c(
"Campylobacteriosis"#,
#"Salmonellosis",
#"Shigellosis",
#'Toxoplasma',
#'Listeriosis',
#"Typhoid Fever"
)
### CURRENTLY THE ESTIMATES COSTS FUNCTION PULLS ON INCIDENCE LIST AS A GLOBAL
### VARIABLE WITH NO REGARD FOR WHICH YEAR INCIDENCE LIST WAS CALCULATED FOR.
### I.E. YOU CAN CALCULATE INCIDENCE FOR YEAR 2019 THEN CALCULATE COSTS FOR YEAR
### 2020 WITHOUT GETTING AN ERROR. FIX BY MAKING INCIDENCE A LIST OF LISTS
### WITH AND ENTRY FOR EACH YEAR?
IncidenceList <- makeIncidenceList(2019,
diseases = DiseaseAssumptions[WorkingDiseases],
ndraws = ndraws)
SequelaeFractions <- calcSequelaeFractions(IncidenceList$Sequel)
HospList <- makeHospList(2019,
IncidenceList,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
DeathList <- makeDeathList(2019,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
CostList$Campylobacteriosis
CostList$Campylobacteriosis$`5-64`$Campylobacteriosis$WTPOngoing
CostList$Campylobacteriosis$`5-64`$Campylobacteriosis$WTP
View(CostList$Campylobacteriosis)
discount
discount
source("./R/estimationFunctions.R")
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
WorkingDiseases <- c("Campylobacteriosis",
"Salmonellosis",
"Shigellosis",
'Toxoplasma',
'Listeriosis',
"Typhoid Fever")
### CURRENTLY THE ESTIMATES COSTS FUNCTION PULLS ON INCIDENCE LIST AS A GLOBAL
### VARIABLE WITH NO REGARD FOR WHICH YEAR INCIDENCE LIST WAS CALCULATED FOR.
### I.E. YOU CAN CALCULATE INCIDENCE FOR YEAR 2019 THEN CALCULATE COSTS FOR YEAR
### 2020 WITHOUT GETTING AN ERROR. FIX BY MAKING INCIDENCE A LIST OF LISTS
### WITH AND ENTRY FOR EACH YEAR?
IncidenceList <- makeIncidenceList(2019,
diseases = DiseaseAssumptions[WorkingDiseases],
ndraws = ndraws)
SequelaeFractions <- calcSequelaeFractions(IncidenceList$Sequel)
HospList <- makeHospList(2019,
IncidenceList,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
DeathList <- makeDeathList(2019,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
source("./R/estimationFunctions.R")
### CURRENTLY THE ESTIMATES COSTS FUNCTION PULLS ON INCIDENCE LIST AS A GLOBAL
### VARIABLE WITH NO REGARD FOR WHICH YEAR INCIDENCE LIST WAS CALCULATED FOR.
### I.E. YOU CAN CALCULATE INCIDENCE FOR YEAR 2019 THEN CALCULATE COSTS FOR YEAR
### 2020 WITHOUT GETTING AN ERROR. FIX BY MAKING INCIDENCE A LIST OF LISTS
### WITH AND ENTRY FOR EACH YEAR?
IncidenceList <- makeIncidenceList(2019,
diseases = DiseaseAssumptions[WorkingDiseases],
ndraws = ndraws)
SequelaeFractions <- calcSequelaeFractions(IncidenceList$Sequel)
HospList <- makeHospList(2019,
IncidenceList,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
DeathList <- makeDeathList(2019,
diseases = c(DiseaseAssumptions[WorkingDiseases],SequelaeAssumptions),
ndraws = ndraws)
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
CostListTotals <- CostList %>%
as.data.frame(check.names = F) %>%
mutate(Draw = row.names(.)) %>%
pivot_longer(-Draw, names_sep = "\\.",
names_to = c("Pathogen", "AgeGroup", "Disease","CostItem")) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, Disease,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(AgeGroup = 'All Ages')) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, AgeGroup,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(Disease = 'All Diseases')) %>%
bind_rows(.,
group_by(.,Draw, Disease, AgeGroup,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(Pathogen = 'All Pathogens'))
CostTable <-  CostListTotals %>%
group_by(Pathogen, AgeGroup, Disease, CostItem) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
WorkingDiseases <- c("Campylobacteriosis",
"Salmonellosis",
"Shigellosis",
'Toxoplasma',
#'Listeriosis',
"Typhoid Fever")
CostList <- makeCostList(2019, DiseaseAssumptions[WorkingDiseases], ndraws, discount = 0) # no discounting and assuming a 5 year duration of ongoing illness is equivalent to the cross-sectional approach if we assume that case numbers were the same over the past five years.
CostListTotals <- CostList %>%
as.data.frame(check.names = F) %>%
mutate(Draw = row.names(.)) %>%
pivot_longer(-Draw, names_sep = "\\.",
names_to = c("Pathogen", "AgeGroup", "Disease","CostItem")) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, Disease,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(AgeGroup = 'All Ages')) %>%
bind_rows(.,
group_by(.,Draw, Pathogen, AgeGroup,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(Disease = 'All Diseases')) %>%
bind_rows(.,
group_by(.,Draw, Disease, AgeGroup,CostItem) %>%
summarise(value = sum(value)) %>%
mutate(Pathogen = 'All Pathogens'))
CostTable <-  CostListTotals %>%
group_by(Pathogen, AgeGroup, Disease, CostItem) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
write.csv(CostTable,'./R/CostTable.csv')
DirectCat <- c('GP','ED','Hospitalisation','Tests','Medications')
WTPCat <- c('WTP', 'WTPOngoing')
CostTableCategories <- CostListTotals %>%
group_by(Draw,Pathogen, AgeGroup, Disease) %>%
summarise(Direct = sum(value[CostItem %in% Direct]),
WTP = sum(value[CostItem %in% WTPCat]),
Deaths = value[CostItem == "Deaths"],
HumanCapital = value[CostItem == "HumanCapital"],
FrictionHigh = value[CostItem == "FrictionHigh"],
FrictionLow = value[CostItem == "FrictionLow"]) %>%
pivot_longer(Direct:FrictionLow,names_to = 'CostCategory', values_to = 'value') %>%
group_by(Pathogen, AgeGroup, Disease, CostCategory) %>%
summarise(median = median(value),
`5%` = quantile(value, 0.05),
`95%` = quantile(value, 0.95))
DirectCat <- c('GP','ED','Hospitalisation','Tests','Medications')
WTPCat <- c('WTP', 'WTPOngoing')
CostTable
